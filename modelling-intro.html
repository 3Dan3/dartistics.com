<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Modelling Introduction</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/default.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Masterclass</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Overview
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intros.html">Introductions</a>
    </li>
    <li>
      <a href="whatisr.html">What Is R?</a>
    </li>
    <li>
      <a href="example1.html">Example: Trending</a>
    </li>
    <li>
      <a href="example2.html">Example: Data Explorer</a>
    </li>
    <li>
      <a href="example3.html">Example: Venn Diagram</a>
    </li>
    <li>
      <a href="example4.html">Example: GA Effect</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exercises
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="exercise1-thebasics.html">1. The Basic Basics</a>
    </li>
    <li>
      <a href="exercise2-io.html">2. I/O</a>
    </li>
    <li>
      <a href="exercise3-accessing-data.html">3. Accessing Data</a>
    </li>
    <li>
      <a href="exercise4-tidy-dplyr.html">4. Tidy Data / dplyr()</a>
    </li>
    <li>
      <a href="exercise5-correlation.html">5. Correlation</a>
    </li>
    <li>
      <a href="exercise6-regression.html">6. Regression</a>
    </li>
    <li>
      <a href="exercise7-visualisation.html">7. Visualisation</a>
    </li>
    <li>
      <a href="exercise8-rmarkdown.html">8. RMarkdown</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="rstudio.html">RStudio</a>
    </li>
    <li>
      <a href="packages.html">Packages</a>
    </li>
    <li>
      <a href="import-csv-excel.html">CSV import</a>
    </li>
    <li>
      <a href="basics-base_r.html">Basics of Base R</a>
    </li>
    <li>
      <a href="classes.html">R Classes</a>
    </li>
    <li>
      <a href="accessing.html">Accessing elements</a>
    </li>
    <li>
      <a href="tidyverse.html">Tidy data / Tidyverse</a>
    </li>
    <li>
      <a href="dplyr.html">dplyr()</a>
    </li>
    <li>
      <a href="habits.html">Good habits</a>
    </li>
    <li>
      <a href="analytics-apis.html">Analytics APIs</a>
    </li>
    <li class="dropdown-header">Microsoft Excel(!)</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Modelling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="modelling-intro.html">Introduction</a>
    </li>
    <li class="dropdown-header">Correlation</li>
    <li class="dropdown-header">Regression</li>
    <li class="dropdown-header">Time-series</li>
    <li class="dropdown-header">Categorisation</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Visualisation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Options</li>
    <li class="dropdown-header">Base Plots</li>
    <li class="dropdown-header">ggplot2()</li>
    <li class="dropdown-header">htmlwidgets()</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Presentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">RMarkdown</li>
    <li class="dropdown-header">Shiny</li>
    <li class="dropdown-header">RMarkdown + Shiny</li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Wrap-Up
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Key topics</li>
    <li class="dropdown-header">GitHub</li>
    <li class="dropdown-header">Best practices</li>
    <li>
      <a href="resources.html">Additional Resources</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Modelling Introduction</h1>

</div>


<p>Data modelling is the reason for R’s existence, and is still used as a primary channel of release for cutting edge new advances in data statistics and modelling. As a marketer, you can take advantage of this cutting edge research in your own real-world data sets.</p>
<div id="picking-a-model" class="section level2">
<h2>Picking a model</h2>
<p>The choice of model can be bewildering, as the options available in R are thousand-fold. As ever, it gets easiesr if you can boil down your problem to the right question, and have some foreknowledge on what can and can’t be done with your type of data.</p>
<p>To get an idea of the questions you need to be answering, take a look at this decision tree for the Python machine learning module, scikit-learn:</p>
<div class="figure">
<img src="images/medium_ml_map.png" />

</div>
<p>Key questions include:</p>
<ul>
<li>How much data do I have?</li>
<li>Is my data categorical, continuous, a time-series, etc.</li>
<li>Am I just exploring, need a forecast or am looking for features?</li>
</ul>
</div>
<div id="common-model-syntax" class="section level2">
<h2>Common model syntax</h2>
<p>Within R, there are some norms that apply to a lot of the modelling functions out there.</p>
</div>
<div id="formula-notation" class="section level2">
<h2>Formula notation</h2>
<p>A lot of model functions use this notation in R, as well as packages like <code>reshape2()</code></p>
<p>Its a way to specify what you want the model to calculate, different from the arguments <code>foo = &quot;blah&quot;</code> you may already be familiar with. Details differ, but for formula notation they typically are closer to how you would write it out in mathematical notation.</p>
<p>For example, if you are running a correlation, you typically want to know how a response <code>y</code> varies with terms <code>x</code> and <code>z</code>. When calling this in <code>lm()</code> you would use:</p>
<pre class="r"><code>y ~ x + z</code></pre>
<blockquote>
<p>~ is a special character used in formula, and means something like “modelled by”. Note no quotes.</p>
</blockquote>
<p>Using <code>mtcars</code> again as an example, here is a linear model made with base <code>lm</code>:</p>
<pre class="r"><code>## Create a linear model that Miles per gallon is modelled by number of cylinders and car weight
model &lt;- lm(mpg ~ cyl + wt, data = mtcars)</code></pre>
<blockquote>
<p>This step can be a real workhorse depending on what statistical model you are applying and the amount of data, so can take several minutes (even hours!) if you are chucking alot of data at it</p>
</blockquote>
</div>
<div id="summary" class="section level2">
<h2>summary()</h2>
<p>Now you have your model, how do you see the results? Most R functions will let you see something via <code>summary()</code></p>
<pre class="r"><code>summary(model)</code></pre>
<pre><code>## 
## Call:
## lm(formula = mpg ~ cyl + wt, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.2893 -1.5512 -0.4684  1.5743  6.1004 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  39.6863     1.7150  23.141  &lt; 2e-16 ***
## cyl          -1.5078     0.4147  -3.636 0.001064 ** 
## wt           -3.1910     0.7569  -4.216 0.000222 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.568 on 29 degrees of freedom
## Multiple R-squared:  0.8302, Adjusted R-squared:  0.8185 
## F-statistic: 70.91 on 2 and 29 DF,  p-value: 6.809e-12</code></pre>
<p>The output will differ depending on your model, and you should read the documentation carefully so you can interpret carefully.</p>
<p>In this case, it looks as if we are getting an R-squared value of <code>0.82</code> on our model and high confidence’s in our estimates for <code>cyl</code> and <code>wt</code> being correlated with <code>mpg</code> (which makes sense).</p>
<p>From the defintion of linear models, it says that if you keep the other variable constant, you lose <code>1.5</code> miles per gallon for every extra cylindar in your car, and lose <code>3.2</code> miles per gallon for every <code>1</code> extra weight.</p>
</div>
<div id="predict" class="section level2">
<h2>predict()</h2>
<p>You can also usually use <code>predict()</code> on the model result to find what your model predicts.</p>
<blockquote>
<p>To see specific help on model predict(), plot() and summary(), add a .functionname to the help defintion. This is related to how R uses R classes e.g. ?predict.lm</p>
</blockquote>
<p>For <code>predict.lm()</code> you can pass a newdata argument - this should hold the same arguments as the predictors you used in the model - e.g. <code>cyl</code> and <code>wt</code> in this case:</p>
<pre class="r"><code>## what would be the miles per gallon for a 10 cylindar behemoth?
new_data &lt;- data.frame(cyl = 10, wt = 5)

## you would get a hefty 8.653 mpg, according to this model
predict(model, new_data)</code></pre>
<pre><code>##        1 
## 8.653451</code></pre>
</div>
<div id="plot" class="section level2">
<h2>plot()</h2>
<p>Finally, you can usually plot the model. These usually aren’t of publishable standard, but instead for a quick exploratory visualisation of what you have just calculated</p>
<pre class="r"><code>plot(model)</code></pre>
<p><img src="modelling-intro_files/figure-html/unnamed-chunk-4-1.png" width="672" /><img src="modelling-intro_files/figure-html/unnamed-chunk-4-2.png" width="672" /><img src="modelling-intro_files/figure-html/unnamed-chunk-4-3.png" width="672" /><img src="modelling-intro_files/figure-html/unnamed-chunk-4-4.png" width="672" /></p>
</div>
<div id="training-validation-and-tests" class="section level2">
<h2>Training, Validation and Tests</h2>
<p>Best practice when creating models is to split your data into training, validation and test data.</p>
<p>This is to prevent you making overconfident predictions, that won’t work well on new data.</p>
<p>A typical split is 60% of your data for training, 20% for validation and 20% for testing.</p>
<blockquote>
<p>more to add here</p>
</blockquote>
</div>
<div id="overfitting" class="section level2">
<h2>Overfitting</h2>
<p>As normal in these situations, a warning on not being rigorous in your analysis approach:</p>
<p>If you skip best practices such as validation or training sets, there is a danger you will make overconfident conclusions. This is sadly quite common in digital marketing where overstated claims can result in more investment in your channel, but if you truely believe in a data-driven appraoch then that will make you less credible in the future once the overstated forecasts fail to arrive.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
